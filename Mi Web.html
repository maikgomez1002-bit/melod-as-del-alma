<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Melod칤as del Alma - Ultra Pro</title>
<style>
body {
    font-family: 'Arial', sans-serif;
    margin: 0; padding: 0;
    background: linear-gradient(-45deg,#121212,#1f1f1f,#ff6600,#ff9933);
    background-size: 400% 400%;
    animation: gradientBG 20s ease infinite;
    color: #f0f0f0;
    transition: background 0.5s, color 0.5s;
}
@keyframes gradientBG {
    0% {background-position: 0% 50%;}
    50% {background-position: 100% 50%;}
    100% {background-position: 0% 50%;}
}
header {
    padding: 15px; text-align: center; background: rgba(0,0,0,0.5);
    backdrop-filter: blur(10px); color: #fff;
}
header h1 { margin:0; font-size:2em; text-shadow:2px 2px 8px rgba(0,0,0,0.7);}
nav{margin-top:10px; display:flex; flex-wrap:wrap; justify-content:center; gap:10px;}
nav button {
    padding:8px 16px; font-size:14px; border:none; border-radius:12px;
    cursor:pointer; background:linear-gradient(90deg,#ff6600,#ff9933);
    color:#fff; font-weight:bold; transition:0.3s ease;
}
nav button:hover{transform:scale(1.1); box-shadow:0 5px 15px rgba(0,0,0,0.3);}
.container{max-width:900px; margin:20px auto; padding:10px 15px;}
.post{
    background-color: rgba(255,255,255,0.05); padding:20px; margin-bottom:25px;
    border-radius:15px; box-shadow:0 10px 25px rgba(0,0,0,0.3);
    opacity:0; transform:translateY(30px); transition: all 0.5s ease;
}
.post:hover{transform:translateY(-5px); box-shadow:0 15px 30px rgba(0,0,0,0.5);}
.post img{width:100%; border-radius:12px; margin-bottom:10px; box-shadow:0 5px 15px rgba(0,0,0,0.3);}
.post h2{margin-top:0; color:#ffcc66; text-shadow:1px 1px 5px rgba(0,0,0,0.5);}
.post p{line-height:1.5;}
.like-btn, .comment-btn{
    margin-top:10px; padding:6px 14px; border:none; border-radius:8px;
    cursor:pointer; background:linear-gradient(90deg,#ff6600,#ff9933);
    color:white; font-weight:bold; transition:0.3s ease;
}
.like-btn:hover,.comment-btn:hover{transform:scale(1.1); box-shadow:0 5px 15px rgba(0,0,0,0.4);}
.comments{margin-top:15px; border-top:1px solid rgba(255,255,255,0.2); padding-top:10px;}
.comment{background-color:rgba(255,255,255,0.1); padding:10px; margin-bottom:10px; border-radius:8px;}
.search-box{text-align:center; margin-bottom:20px;}
.search-box input{
    padding:12px; width:90%; max-width:400px; border-radius:12px; border:none; font-size:16px;
    transition:0.3s ease;
}
.search-box input:focus{outline:none; box-shadow:0 0 15px rgba(255,102,0,0.7);}
.light-mode{background:linear-gradient(-45deg,#f5f5f5,#e0e0e0,#ffcc66,#ff9966); color:#121212;}
.light-mode .post{background-color:rgba(0,0,0,0.05);}
.light-mode nav button{background:linear-gradient(90deg,#121212,#333333); color:#ff9933;}
.light-mode .like-btn,.light-mode .comment-btn{background:linear-gradient(90deg,#121212,#333333); color:#ff9933;}
#mini-player{
    position: fixed; bottom: 25px; right: 25px;
    background: linear-gradient(90deg,#ff6600,#ff9933);
    padding:12px 18px; border-radius:20px; color:white;
    box-shadow:0 10px 25px rgba(0,0,0,0.4); z-index:1000;
    opacity:0; transform:translateY(30px); transition:0.5s ease;
    display:flex; flex-direction:column; align-items:center;
}
#mini-player.show{opacity:1; transform:translateY(0);}
#mini-player audio{width:100%; max-width:220px; margin-top:5px;}
#visualizer-canvas{
    position: fixed; bottom:80px; right:25px; width:220px; height:60px;
    border-radius:15px; display:none; background:rgba(0,0,0,0.2);
}
@media(max-width:600px){
    header h1{font-size:1.7em;} nav button{font-size:12px; padding:6px 12px;}
    #mini-player{width:90%; right:5%; bottom:15px;}
    #visualizer-canvas{width:90%; right:5%; bottom:100px;}
}
</style>
</head>
<body>
<header>
<h1>Melod칤as del Alma - Ultra Pro</h1>
<nav>
<button onclick="toggleMode()">Modo Oscuro/Claro</button>
<button onclick="agregarPost()">Agregar Publicaci칩n</button>
</nav>
</header>

<div class="search-box">
<input type="text" id="search" placeholder="Buscar publicaciones..." oninput="buscarPosts()">
</div>

<div class="container" id="blog"></div>

<!-- Mini reproductor -->
<div id="mini-player">
<span id="current-track">Reproduciendo: Ninguna</span><br>
<audio id="player" controls></audio>
</div>

<!-- Canvas visualizador -->
<canvas id="visualizer-canvas"></canvas>

<script>
// ===== Posts iniciales =====
let posts = JSON.parse(localStorage.getItem('posts')) || [
{titulo:"Sue침os de Verano", contenido:"Un tema relajante para disfrutar los atardeceres.", audio:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3", imagen:"https://picsum.photos/id/1015/400/200", likes:0, comentarios:[]},
{titulo:"Ritmos del Alma", contenido:"Un viaje musical que te har치 sentir cada nota.", audio:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3", imagen:"https://picsum.photos/id/1016/400/200", likes:0, comentarios:[]},
{titulo:"Noche Estrellada", contenido:"Canci칩n perfecta para meditar y relajarte.", audio:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3", imagen:"https://picsum.photos/id/1018/400/200", likes:0, comentarios:[]},
{titulo:"Energ칤a Urbana", contenido:"Ritmos urbanos para motivarte en tu d칤a.", audio:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3", imagen:"https://picsum.photos/id/1020/400/200", likes:0, comentarios:[]},
{titulo:"Cl치sicos Eternos", contenido:"Una selecci칩n de m칰sica cl치sica atemporal.", audio:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-5.mp3", imagen:"https://picsum.photos/id/1024/400/200", likes:0, comentarios:[]},
{titulo:"Electro Beat", contenido:"M칰sica electr칩nica que te har치 moverte.", audio:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-6.mp3", imagen:"https://picsum.photos/id/1025/400/200", likes:0, comentarios:[]},
{titulo:"Melod칤as del Coraz칩n", contenido:"Baladas suaves para momentos rom치nticos.", audio:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-7.mp3", imagen:"https://picsum.photos/id/1031/400/200", likes:0, comentarios:[]},
{titulo:"Viaje Tropical", contenido:"Ritmos caribe침os que te transportan a la playa.", audio:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-8.mp3", imagen:"https://picsum.photos/id/1033/400/200", likes:0, comentarios:[]},
{titulo:"Rock en Vivo", contenido:"Canciones de rock que energizan tu esp칤ritu.", audio:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-9.mp3", imagen:"https://picsum.photos/id/1035/400/200", likes:0, comentarios:[]},
{titulo:"Jazz Nocturno", contenido:"Jazz suave ideal para relajarte por la noche.", audio:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-10.mp3", imagen:"https://picsum.photos/id/1038/400/200", likes:0, comentarios:[]}
];

function guardarPosts(){ localStorage.setItem('posts', JSON.stringify(posts)); }
function renderPosts(filter=""){
    const blog = document.getElementById("blog");
    blog.innerHTML="";
    posts.forEach((post,index)=>{
        if(filter && !post.titulo.toLowerCase().includes(filter.toLowerCase()) && !post.contenido.toLowerCase().includes(filter.toLowerCase())) return;
        const postDiv = document.createElement("div");
        postDiv.className="post";
        postDiv.innerHTML=`
            <img src="${post.imagen}" alt="${post.titulo}">
            <h2>${post.titulo}</h2>
            <p>${post.contenido}</p>
            <audio controls onclick="playMiniPlayer('${post.audio}','${post.titulo}')">
                <source src="${post.audio}" type="audio/mpeg">Tu navegador no soporta audio.
            </audio>
            <button class="like-btn" onclick="darLike(${index})">游녨 ${post.likes}</button>
            <button class="comment-btn" onclick="agregarComentario(${index})">游눫 Comentar</button>
            <div class="comments" id="comments-${index}">
                ${post.comentarios.map(c=>`<div class="comment">${c}</div>`).join('')}
            </div>
        `;
        blog.appendChild(postDiv);
        setTimeout(()=>{ postDiv.style.opacity=1; postDiv.style.transform='translateY(0)'; },100);
    });
}

// ===== Funciones interactivas =====
function toggleMode(){ document.body.classList.toggle('light-mode'); }
function agregarPost(){
    const titulo=prompt("Ingresa el t칤tulo:");
    const contenido=prompt("Ingresa el contenido:");
    const audio=prompt("Ingresa la URL de la canci칩n:");
    const imagen=prompt("Ingresa la URL de la imagen de portada:");
    if(titulo && contenido && audio && imagen){
        posts.unshift({titulo,contenido,audio